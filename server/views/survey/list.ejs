
<%- include ../partials/header.ejs %>

<%- include ../partials/main_nav.ejs %>

  <!-- Main Content -->
  
<main class="container">
    
        <div class="row justify-content-center">
            <div class="col-5 align-self-start">
                <h1 style="color: rgb(10, 22, 10); margin-top: 80px; margin-bottom: 80px;">Survey List</h1>
            </div>
            <div class="col-4 align-self-end">
                <% if(typeof userId=='string' && userId ) {%>
                <div class="card-body" style="margin-top: 50px; margin-bottom: 80px; border-radius: 15px 50px; border: 2px solid #7490b1; background-color: transparent;">
                <div class ="container-fluid">
                    <div class="row justify-content-center">
                        <div class="col-1">
                            <a class="btn btn-primary" href="/survey-list/add/"><i class="fas fa-plus-circle fa-5x newsurvey" style=" cursor: pointer; cursor: hand; margin-right: 50px;"></i></a>
                        </div>
                        <div class="col">
                            <h4 style="color: rgb(255, 0, 0); margin-top: 25px; margin-left: 80px;" class="card-title">Create your own new survey!!</h4>
                        </div>
                    </div>    
                </div>
                </div>     
                <%} else {%>                
                <a class="btn btn-primary" href="/login/"><h4>Create your survey now!!</h4></a>
                <%}%>  

            </div>
        </div>
            <div class="col-md-11 text-center">
                    <div class="row">
                <% for(let count = 0; count < SurveyList.length; count++) { %>
                    <% if(typeof userId=='string' && userId ) {%>
                        <% if ( today >= SurveyList[count].startdate && today <= SurveyList[count].enddate) {%>
                            <div class="col-6">    
                                    <div class="card text-center popup" style="background-color: transparent; margin-bottom: 75px;" class="d-flex">
                                        <div class="card-header  text-muted" style="color:rgb(78, 84, 126); font-family: Courier; font-size:120%;"></div>
                                        <div class="card-body" style="border-radius: 15px 50px; background-color: rgb(184, 187, 207);   cursor: pointer; cursor: hand;" onclick="window.location='/survey-list/survey/<%= SurveyList[count]._id %>';">
                                            <div class="row">
                                            <div class="col">
                                            <h4 style="color: rgb(52, 69, 179); margin-top: 25px; margin-right: 40px;" class="card-title"><%= SurveyList[count].title %></h4>
                                            </div>
                                            </div>
                                        </div>
                                        <div class="card-footer"  style=" color:rgb(52, 69, 179); font-family: Courier;  font-size:120%;">
                                        Available until: <%= SurveyList[count].enddate.toISOString().split('T')[0] %>
                                        </div>
                                    </div>
                                </div>
                    <% } } else { %>
                    
                            <% if ( today >= SurveyList[count].startdate && today <= SurveyList[count].enddate) {%>
                                <div class="col-5">    
                                    <div class="card text-center popup" style="background-color: transparent; margin-bottom: 50px;" class="d-flex">
                                        <div class="card-header  text-muted" style=" color:rgb(93, 106, 154); font-family: Courier; font-size:120%;"></div>
                                        <div class="card-body" style="border-radius: 15px 15px; background-color: #6fc185; cursor: pointer; cursor: hand;"  onclick="window.location='/login/';">
                                            <div class="row">
                                            <div class="col-4">
                                            </div>
                                            <div class="col">
                                            <h4 style="color: rgb(12, 12, 12); margin-bottom: 15px;" class="card-title"><%= SurveyList[count].title %></h4>
                                            <p  class="card-text">Login to participate in this survey</p>
                                            </div>
                                            </div>
                                        </div>
                                        <div class="card-footer"  style=" color:rgb(93, 106, 154); font-family: Courier;  font-size:120%;">
                                        Available until: <%= SurveyList[count].enddate.toISOString().split('T')[0] %>
                                        </div>
                                    </div>
                                </div>    
                            <% } %>
                        
                    <% } } %>
                    
                </div>
            </div>
        
    </div>
    
</main>
  
<%- include ../partials/survey_bottom_nav.ejs %>  

<%- include ../partials/footer.ejs %>
  





